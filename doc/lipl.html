<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.4: http://docutils.sourceforge.net/" />
<title>LIPL</title>
<meta name="author" content="Sam Lee" />
<style type="text/css">

/*
:Author: David Goodger
:Contact: goodger@users.sourceforge.net
:Date: $Date: 2005-12-18 01:56:14 +0100 (Sun, 18 Dec 2005) $
:Revision: $Revision: 4224 $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin-left: 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left {
  clear: left }

img.align-right {
  clear: right }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font-family: serif ;
  font-size: 100% }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em ;
  background-color: #eeeeee }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

tt.docutils {
  background-color: #eeeeee }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="lipl">
<h1 class="title">LIPL</h1>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr><th class="docinfo-name">Author:</th>
<td>Sam Lee</td></tr>
</tbody>
</table>
<div class="contents topic">
<p class="topic-title first"><a id="contents" name="contents">Contents</a></p>
<ul class="auto-toc simple">
<li><a class="reference" href="#introduction" id="id3" name="id3">1&nbsp;&nbsp;&nbsp;Introduction</a></li>
<li><a class="reference" href="#syntax" id="id4" name="id4">2&nbsp;&nbsp;&nbsp;Syntax</a><ul class="auto-toc">
<li><a class="reference" href="#ebnf" id="id5" name="id5">2.1&nbsp;&nbsp;&nbsp;EBNF</a></li>
<li><a class="reference" href="#atom" id="id6" name="id6">2.2&nbsp;&nbsp;&nbsp;Atom</a><ul class="auto-toc">
<li><a class="reference" href="#number" id="id7" name="id7">2.2.1&nbsp;&nbsp;&nbsp;Number</a></li>
<li><a class="reference" href="#string" id="id8" name="id8">2.2.2&nbsp;&nbsp;&nbsp;String</a></li>
<li><a class="reference" href="#symbol" id="id9" name="id9">2.2.3&nbsp;&nbsp;&nbsp;Symbol</a></li>
</ul>
</li>
<li><a class="reference" href="#list" id="id10" name="id10">2.3&nbsp;&nbsp;&nbsp;List</a></li>
<li><a class="reference" href="#term" id="id11" name="id11">2.4&nbsp;&nbsp;&nbsp;Term</a></li>
<li><a class="reference" href="#expression" id="id12" name="id12">2.5&nbsp;&nbsp;&nbsp;Expression</a></li>
<li><a class="reference" href="#function-application" id="id13" name="id13">2.6&nbsp;&nbsp;&nbsp;Function Application</a></li>
<li><a class="reference" href="#function-definition" id="id14" name="id14">2.7&nbsp;&nbsp;&nbsp;Function Definition</a></li>
<li><a class="reference" href="#bind" id="id15" name="id15">2.8&nbsp;&nbsp;&nbsp;Bind</a></li>
<li><a class="reference" href="#local-scope" id="id16" name="id16">2.9&nbsp;&nbsp;&nbsp;Local Scope</a><ul class="auto-toc">
<li><a class="reference" href="#let" id="id17" name="id17">2.9.1&nbsp;&nbsp;&nbsp;Let</a></li>
<li><a class="reference" href="#namespace" id="id18" name="id18">2.9.2&nbsp;&nbsp;&nbsp;Namespace</a></li>
</ul>
</li>
<li><a class="reference" href="#lambda-abstraction" id="id19" name="id19">2.10&nbsp;&nbsp;&nbsp;Lambda Abstraction</a></li>
<li><a class="reference" href="#conditional" id="id20" name="id20">2.11&nbsp;&nbsp;&nbsp;Conditional</a><ul class="auto-toc">
<li><a class="reference" href="#if" id="id21" name="id21">2.11.1&nbsp;&nbsp;&nbsp;If</a></li>
<li><a class="reference" href="#case" id="id22" name="id22">2.11.2&nbsp;&nbsp;&nbsp;Case</a></li>
</ul>
</li>
<li><a class="reference" href="#data-type" id="id23" name="id23">2.12&nbsp;&nbsp;&nbsp;Data Type</a><ul class="auto-toc">
<li><a class="reference" href="#product-type" id="id24" name="id24">2.12.1&nbsp;&nbsp;&nbsp;Product Type</a></li>
<li><a class="reference" href="#sum-type" id="id25" name="id25">2.12.2&nbsp;&nbsp;&nbsp;Sum Type</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference" href="#examples" id="id26" name="id26">3&nbsp;&nbsp;&nbsp;Examples</a><ul class="auto-toc">
<li><a class="reference" href="#fibonacci" id="id27" name="id27">3.1&nbsp;&nbsp;&nbsp;Fibonacci</a></li>
<li><a class="reference" href="#id2" id="id28" name="id28">3.2&nbsp;&nbsp;&nbsp;List</a></li>
</ul>
</li>
</ul>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id3" id="introduction" name="introduction">1&nbsp;&nbsp;&nbsp;Introduction</a></h1>
<p>LIPL is a functional programming language.</p>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id4" id="syntax" name="syntax">2&nbsp;&nbsp;&nbsp;Syntax</a></h1>
<div class="section">
<h2><a class="toc-backref" href="#id5" id="ebnf" name="ebnf">2.1&nbsp;&nbsp;&nbsp;EBNF</a></h2>
<p>Below is informal <a class="reference" href="http://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_form">EBNF</a></p>
<pre class="literal-block">
letter = (* alphabetic character *)
digit = '0' | '1' | ... '9'
space = ' ' | '\t' | ...
    (* white space character *)
spaces = space { space }
    (* one or more spaces (mandatory) *)
ws = [ spaces ]
    (* optional spaces *)
nat = digit { digit }
    (* natural number. allowing leading zeros *)
integer = [ ( '-' | '+' ) ] nat
    (* optional - or + *)
float = [ ( '-' | '+' ) ] nat '.' nat
    (* floating point number. . must present *)

ident = letter { ( letter | digit | '_' | '-' ) }
    (* identifier. starts with a letter. *)
number = integer | float
char = &quot;'&quot; (? any single character ?) &quot;'&quot;
    (* unicode character. ' should be escaped. *)
string = '&quot;' (? characters with escaped '&quot;' ?) '&quot;'
symbol = ident | '+' | '-' | ...
list = '[' ws ']'
     | '[' ws expr { ws ',' ws expr } ws ']'
atom = number | string | symbol
term = atom | list | '(' ws terms ws ')'
terms = [ term ] { spaces term }
</pre>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id6" id="atom" name="atom">2.2&nbsp;&nbsp;&nbsp;Atom</a></h2>
<p>An atom's value is itself, except for bound atoms.</p>
<div class="section">
<h3><a class="toc-backref" href="#id7" id="number" name="number">2.2.1&nbsp;&nbsp;&nbsp;Number</a></h3>
<p>A number can be an integer: 1, +2, -32532, -00342, ...
Or, a floating point number: +000.234, -23.43, 0.0023402, ...</p>
</div>
<div class="section">
<h3><a class="toc-backref" href="#id8" id="string" name="string">2.2.2&nbsp;&nbsp;&nbsp;String</a></h3>
<p>String is a sequence of characters enclosed inside <tt class="docutils literal"><span class="pre">&quot;</span></tt>.
To use <tt class="docutils literal"><span class="pre">&quot;</span></tt> inside a string, escape it using <tt class="docutils literal"><span class="pre">\</span></tt>.</p>
<p>Examples include: &quot;hi! i'm a string&quot;, &quot;let's escape &quot;!!&quot;, ...</p>
</div>
<div class="section">
<h3><a class="toc-backref" href="#id9" id="symbol" name="symbol">2.2.3&nbsp;&nbsp;&nbsp;Symbol</a></h3>
<p>A symbol can be bound. If it's bound, its value is the value of what it is
bound to.
Otherwise, a symbol's value is itself.</p>
<p>An identifier starts with an alphabetic character.
It can then include digits, <tt class="docutils literal"><span class="pre">-</span></tt>, and <tt class="docutils literal"><span class="pre">_</span></tt>.</p>
<p>Identifier can be nested using <tt class="docutils literal"><span class="pre">.</span></tt>.
For example, <tt class="docutils literal"><span class="pre">name.first</span></tt> refers to attribute <tt class="docutils literal"><span class="pre">first</span></tt>
of identifier <tt class="docutils literal"><span class="pre">name</span></tt>.</p>
<p><tt class="docutils literal"><span class="pre">one</span></tt>, <tt class="docutils literal"><span class="pre">twenty-three</span></tt>, <tt class="docutils literal"><span class="pre">Oh001</span></tt>, <tt class="docutils literal"><span class="pre">+::</span></tt>, <tt class="docutils literal"><span class="pre">--&gt;</span></tt>...
all evaluate to themselves unless they are bound to some other value.</p>
</div>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id10" id="list" name="list">2.3&nbsp;&nbsp;&nbsp;List</a></h2>
<p>A list is enclosed with <tt class="docutils literal"><span class="pre">[]</span></tt>. Each element in a list is separated
by <tt class="docutils literal"><span class="pre">,</span></tt>.
A list is homogeneous.</p>
<p><tt class="docutils literal"><span class="pre">[1,2,3]</span></tt> is a valid list, while <tt class="docutils literal"><span class="pre">[1,2,&quot;hi&quot;]</span></tt> is not.</p>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id11" id="term" name="term">2.4&nbsp;&nbsp;&nbsp;Term</a></h2>
<p>A term is either a list, an atom, or a parenthesized sequence of terms
delimited by white space.</p>
<pre class="literal-block">
(a (+ 1 2)
   b (c d))
</pre>
<p>is a valid term.</p>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id12" id="expression" name="expression">2.5&nbsp;&nbsp;&nbsp;Expression</a></h2>
<p>An expression is a sequence of whitespace delimited terms.
An expression ends with <tt class="docutils literal"><span class="pre">'\n'</span></tt>.</p>
<pre class="literal-block">
= a (+ 1 2)
</pre>
<p>is an expression of three terms</p>
<pre class="literal-block">
(= a (+ 1 2))
</pre>
<p>is an expression of one term. But, the term has three sub-terms.</p>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id13" id="function-application" name="function-application">2.6&nbsp;&nbsp;&nbsp;Function Application</a></h2>
<p><tt class="docutils literal"><span class="pre">symbol</span> <span class="pre">term1</span> <span class="pre">term2</span> <span class="pre">...</span></tt> denotes function application:
<tt class="docutils literal"><span class="pre">symbol(term1,</span> <span class="pre">term2,</span> <span class="pre">...)</span></tt> where
<tt class="docutils literal"><span class="pre">symbol</span></tt> is a function.</p>
<pre class="literal-block">
+ 1 2
==&gt; 3
</pre>
<p>applies <tt class="docutils literal"><span class="pre">+</span></tt> on arguments 1 and 2.
Since the symbol <tt class="docutils literal"><span class="pre">+</span></tt> adds two numbers, <tt class="docutils literal"><span class="pre">+</span> <span class="pre">1</span> <span class="pre">2</span></tt> yields 3.</p>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id14" id="function-definition" name="function-definition">2.7&nbsp;&nbsp;&nbsp;Function Definition</a></h2>
<p><tt class="docutils literal"><span class="pre">def</span> <span class="pre">symbol</span> <span class="pre">args</span> <span class="pre">body</span></tt>
creates a new function and binds it to <tt class="docutils literal"><span class="pre">symbol</span></tt>.</p>
<pre class="literal-block">
def fac n (
    if (&lt; n 2)
       1
       (* n (fac (- n 1)))
)
fac 4
==&gt; 24
</pre>
<p>defines a factorial function and calls it with argument 4.
So, it returns 24 <em>(= 4!)</em>.</p>
<pre class="literal-block">
def add (a b) (+ a b)
add 2 3
==&gt; 5
</pre>
<p>defines function <tt class="docutils literal"><span class="pre">add</span></tt> that adds two numbers
and calls it with parameters 2 and 3.</p>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id15" id="bind" name="bind">2.8&nbsp;&nbsp;&nbsp;Bind</a></h2>
<p>The symbol, <tt class="docutils literal"><span class="pre">=</span></tt>, is a binder.
<tt class="docutils literal"><span class="pre">=</span> <span class="pre">symbol</span> <span class="pre">term</span></tt> binds <tt class="docutils literal"><span class="pre">term</span></tt> to <tt class="docutils literal"><span class="pre">symbol</span></tt>.</p>
<pre class="literal-block">
(= a
   1)
= b (+ a 40)
+ a b
==&gt; 42
</pre>
<p>binds 1 to <tt class="docutils literal"><span class="pre">a</span></tt> and 41 <em>(= 1 + 40)</em> to <tt class="docutils literal"><span class="pre">b</span></tt>.
Then calls <tt class="docutils literal"><span class="pre">+</span></tt> with 1 and 41, returning 42.</p>
<p>Binding to the same symbol can happen only once.</p>
<pre class="literal-block">
= c &quot;hello&quot;
= c &quot;world&quot;
==&gt; Error
</pre>
<p>Since <tt class="docutils literal"><span class="pre">c</span></tt> is already bound to <tt class="docutils literal"><span class="pre">&quot;hello&quot;</span></tt>, it cannot be bound
again to <tt class="docutils literal"><span class="pre">&quot;world&quot;</span></tt>.</p>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id16" id="local-scope" name="local-scope">2.9&nbsp;&nbsp;&nbsp;Local Scope</a></h2>
<div class="section">
<h3><a class="toc-backref" href="#id17" id="let" name="let">2.9.1&nbsp;&nbsp;&nbsp;Let</a></h3>
<p><tt class="docutils literal"><span class="pre">let</span> <span class="pre">env</span> <span class="pre">body</span></tt>
creates a new environment defined by <tt class="docutils literal"><span class="pre">env</span></tt>.
Its value is <tt class="docutils literal"><span class="pre">body</span></tt>.</p>
<pre class="literal-block">
= a &quot;hello&quot;
= foo 2
let ((= a 2)
      (= b foo))
     (let (= a 1) a)
==&gt; 1
</pre>
<p>At toplevel, <tt class="docutils literal"><span class="pre">a</span></tt> is bound to <tt class="docutils literal"><span class="pre">&quot;hello&quot;</span></tt>. And <tt class="docutils literal"><span class="pre">foo</span></tt> is bound to 2.
The first <tt class="docutils literal"><span class="pre">let</span></tt> creates an environment where <tt class="docutils literal"><span class="pre">a</span></tt> is bound to 2,
and <tt class="docutils literal"><span class="pre">b</span></tt> is bound to <tt class="docutils literal"><span class="pre">foo</span></tt> <em>(= 2)</em>.
This second <tt class="docutils literal"><span class="pre">a</span></tt> shadows <tt class="docutils literal"><span class="pre">a</span></tt> in the toplevel.
Then, it evaluates <tt class="docutils literal"><span class="pre">(let</span> <span class="pre">(=</span> <span class="pre">a</span> <span class="pre">1)</span> <span class="pre">a)</span></tt>.
The value of the second <tt class="docutils literal"><span class="pre">let</span></tt> term is 1 because the new environment
it creates binds <tt class="docutils literal"><span class="pre">a</span></tt> to 1.
Hence, the value of the first <tt class="docutils literal"><span class="pre">let</span></tt> term is the value of the 2nd <tt class="docutils literal"><span class="pre">let</span></tt>
term, which is 1.</p>
</div>
<div class="section">
<h3><a class="toc-backref" href="#id18" id="namespace" name="namespace">2.9.2&nbsp;&nbsp;&nbsp;Namespace</a></h3>
<p><tt class="docutils literal"><span class="pre">ns</span> <span class="pre">name</span> <span class="pre">env</span></tt> creates a namespace named <tt class="docutils literal"><span class="pre">name</span></tt>, which includes
bound symbols defined in <tt class="docutils literal"><span class="pre">env</span></tt>.</p>
<pre class="literal-block">
ns foo ((= a 1) (= b 2))
+ foo.a foo.b
==&gt; 3
</pre>
<p>creates a namespace <tt class="docutils literal"><span class="pre">foo</span></tt>. Then, adds <tt class="docutils literal"><span class="pre">a</span></tt> and <tt class="docutils literal"><span class="pre">b</span></tt>,
both only accessible through <tt class="docutils literal"><span class="pre">foo</span></tt>, using <tt class="docutils literal"><span class="pre">.</span></tt>.</p>
</div>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id19" id="lambda-abstraction" name="lambda-abstraction">2.10&nbsp;&nbsp;&nbsp;Lambda Abstraction</a></h2>
<p><tt class="docutils literal"><span class="pre">fun</span> <span class="pre">args</span> <span class="pre">body</span></tt> creates a nameless function.</p>
<pre class="literal-block">
(fun (a b) (if (&lt; a 0) b (* a b)) 1 2
==&gt; 2
</pre>
<p>creates a nameless function and applies it on arguments 1 and 2.</p>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id20" id="conditional" name="conditional">2.11&nbsp;&nbsp;&nbsp;Conditional</a></h2>
<div class="section">
<h3><a class="toc-backref" href="#id21" id="if" name="if">2.11.1&nbsp;&nbsp;&nbsp;If</a></h3>
<p><tt class="docutils literal"><span class="pre">if</span> <span class="pre">bool-term</span> <span class="pre">if-term</span> <span class="pre">else-term</span></tt> is conditional expression.
When <tt class="docutils literal"><span class="pre">bool-term</span></tt> is true, <tt class="docutils literal"><span class="pre">if-term</span></tt> is evaluated.
Otherwise, <tt class="docutils literal"><span class="pre">else-term</span></tt> is evaluated.</p>
<pre class="literal-block">
if (== 1 2) &quot;hey&quot; (if (== 1 1)
                      &quot;bye&quot;
                      &quot;???&quot;)
==&gt; &quot;bye&quot;
</pre>
</div>
<div class="section">
<h3><a class="toc-backref" href="#id22" id="case" name="case">2.11.2&nbsp;&nbsp;&nbsp;Case</a></h3>
<p><tt class="docutils literal"><span class="pre">case</span> <span class="pre">term</span> <span class="pre">((match-1</span> <span class="pre">result-1)</span> <span class="pre">(match-2</span> <span class="pre">result-2)</span> <span class="pre">...)</span></tt>
tests <tt class="docutils literal"><span class="pre">term</span></tt> against <tt class="docutils literal"><span class="pre">match-i</span></tt>. When <tt class="docutils literal"><span class="pre">match-i</span></tt> matches <tt class="docutils literal"><span class="pre">term</span></tt>,
<tt class="docutils literal"><span class="pre">result-i</span></tt> is returned. Otherwise, exception.</p>
<pre class="literal-block">
case (1 1 42) (
    ((1 2 3) &quot;a&quot;)
    ((b 1 41) b)
    ((_ 1 c) c)
)
==&gt; 42
</pre>
<p>tests pattern <tt class="docutils literal"><span class="pre">(1</span> <span class="pre">1</span> <span class="pre">42)</span></tt> against <tt class="docutils literal"><span class="pre">(1</span> <span class="pre">2</span> <span class="pre">3)</span></tt>, <tt class="docutils literal"><span class="pre">(1</span> <span class="pre">0</span> <span class="pre">b)</span></tt>,
and <tt class="docutils literal"><span class="pre">(_</span> <span class="pre">1</span> <span class="pre">c)</span></tt> in order.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">(1</span> <span class="pre">2</span> <span class="pre">3)</span></tt> does not match <tt class="docutils literal"><span class="pre">(1</span> <span class="pre">1</span> <span class="pre">42)</span></tt> because of
the 2nd element: <em>2 != 1</em>.</li>
<li><tt class="docutils literal"><span class="pre">(b</span> <span class="pre">1</span> <span class="pre">41)</span></tt> does not match <tt class="docutils literal"><span class="pre">(1</span> <span class="pre">1</span> <span class="pre">42)</span></tt> because of the 3rd element.</li>
<li><tt class="docutils literal"><span class="pre">(_</span> <span class="pre">1</span> <span class="pre">c)</span></tt> matches <tt class="docutils literal"><span class="pre">(1</span> <span class="pre">1</span> <span class="pre">42)</span></tt>. <tt class="docutils literal"><span class="pre">_</span></tt> is a wildcard that
matches anything. 42 is bound to <tt class="docutils literal"><span class="pre">c</span></tt> and returned.</li>
</ul>
</div>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id23" id="data-type" name="data-type">2.12&nbsp;&nbsp;&nbsp;Data Type</a></h2>
<div class="section">
<h3><a class="toc-backref" href="#id24" id="product-type" name="product-type">2.12.1&nbsp;&nbsp;&nbsp;Product Type</a></h3>
<p><tt class="docutils literal"><span class="pre">pt</span> <span class="pre">Constructor</span> <span class="pre">TypeSignature</span></tt> creates a product type
that can be constructed using <tt class="docutils literal"><span class="pre">Constructor</span></tt>.</p>
<pre class="literal-block">
pt Foo (Int Float String)
= a (Foo 1 2.3 &quot;hello&quot;)
</pre>
<p><tt class="docutils literal"><span class="pre">Foo</span></tt> can be used to construct an object made of <tt class="docutils literal"><span class="pre">Int</span></tt>
, <tt class="docutils literal"><span class="pre">Float</span></tt>, and <tt class="docutils literal"><span class="pre">String</span></tt>.
<tt class="docutils literal"><span class="pre">a</span></tt> is bound to a such object.</p>
</div>
<div class="section">
<h3><a class="toc-backref" href="#id25" id="sum-type" name="sum-type">2.12.2&nbsp;&nbsp;&nbsp;Sum Type</a></h3>
<p><tt class="docutils literal"><span class="pre">data</span> <span class="pre">TypeName</span> <span class="pre">ProductTypes</span></tt> creates a sum type of product types.</p>
<pre class="literal-block">
data Person (
    (pt Male (String String))
    (pt Female (String String Int))
)
</pre>
<p>creates a sum type <tt class="docutils literal"><span class="pre">Person</span></tt> that can be constructed using
either <tt class="docutils literal"><span class="pre">Male</span></tt> or <tt class="docutils literal"><span class="pre">Female</span></tt> constructor.</p>
<pre class="literal-block">
typeof f (Person String)
def f p (case p (
    ((Male _ lname) (++ &quot;Mr. &quot; lname))
    (_ (++ &quot;Ms. &quot; lname))
))
f (Female &quot;Jane&quot; &quot;Lipl&quot; 1)
==&gt; &quot;Ms. Lipl&quot;
</pre>
<p><tt class="docutils literal"><span class="pre">typeof</span> <span class="pre">f</span> <span class="pre">(Person</span> <span class="pre">String)</span></tt> declares type of <tt class="docutils literal"><span class="pre">f</span></tt> to be
<tt class="docutils literal"><span class="pre">Person</span> <span class="pre">-&gt;</span> <span class="pre">String</span></tt> (a function that takes a Person and returns
String).
<tt class="docutils literal"><span class="pre">f</span></tt> is defined so that when the parameter passed to it was
<tt class="docutils literal"><span class="pre">(Male</span> <span class="pre">...)</span></tt>, it returns <tt class="docutils literal"><span class="pre">&quot;Mr.</span> <span class="pre">&lt;last</span> <span class="pre">name&gt;&quot;</span></tt>.
Otherwise, it returns <tt class="docutils literal"><span class="pre">&quot;Ms.</span> <span class="pre">&lt;last</span> <span class="pre">name&gt;&quot;</span></tt>.</p>
</div>
</div>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id26" id="examples" name="examples">3&nbsp;&nbsp;&nbsp;Examples</a></h1>
<div class="section">
<h2><a class="toc-backref" href="#id27" id="fibonacci" name="fibonacci">3.1&nbsp;&nbsp;&nbsp;Fibonacci</a></h2>
<pre class="literal-block">
typeof fib (Int Int)
def fib n (if (&lt; n 2)
              n
              (+ (fib (- n 1)) (fib (- n 2))))
fib 4
==&gt; 3
</pre>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id28" id="id2" name="id2">3.2&nbsp;&nbsp;&nbsp;List</a></h2>
<pre class="literal-block">
data (List a) (
    Empty
    (Cons a List)
)

typeof sum ((List Int) Int)
def sum l (case l (
    (Empty 0)
    ((Cons i li) (+ i (sum li)))
))
sum (Cons 1 (Cons 2 (Cons 3 (Cons 4 Empty))))
==&gt; 10
</pre>
</div>
</div>
</div>
</body>
</html>
